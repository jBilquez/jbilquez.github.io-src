<!doctype html>
<html class="no-js" lang="fr">
    <head>
        
        <!--Meta tags-->
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        
        <!--Yes, the title is inside the meta tags-->
        <title>The Portfolio</title>

        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!--/Meta tags-->

        <!--scripts-->
        <script src="js/react.js"></script>
        <script src="js/react-dom.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react-router/0.13.4/ReactRouter.js"></script>
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

        <!--links-->
        <link rel="stylesheet" type="text/css" href="css/main.css" />
        <link rel="stylesheet" type="text/css" href="css/waves.min.css" />

    </head>

    <body>

        <!--Web font loader to add the Roboto font asynchrounisly -->
        <script>
            var WebFontConfig = {
                google: { families: [ 'Roboto:400,300,500:latin' ] }
            };
            (function() {
                var wf = document.createElement('script');
                
                wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
                    '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
                wf.type = 'text/javascript';
                wf.async = 'false';

                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(wf, s);
            })();
        </script>
 
        <script src="js/waves.min.js"></script>  
        <div id="content" class="fullscreen"></div>
        <script src="js/app.js"></script>

        <script>
        (function () {

            if ("ontouchstart" in window) {
                document.documentElement.className = document.documentElement.className + ' touch';
            }

            if (!$("html").hasClass('touch')) {
                $('.parallax').addClass('background-fixed');
            }

            /* fix vertical when not overflow
            call fullscreenFix() if .fullscreen content changes */
            function fullscreenFix(){
                var h = $('body').height();
                // set .fullscreen height
                $(".content-b").each(function(i){
                    if($(this).innerHeight() <= h){
                        $(this).closest(".fullscreen").addClass("not-overflow");
                    }
                });
            }
            $(window).resize(fullscreenFix);
            fullscreenFix();

            /* resize background images */
            function backgroundResize(){
                var windowH = $(window).height();
                $(".background").each(function(i){
                    var path = $(this);
                    // variables
                    var contW = path.width();
                    var contH = path.height();
                    var imgW = path.attr("data-img-width");
                    var imgH = path.attr("data-img-height");
                    var ratio = imgW / imgH;
                    // overflowing difference
                    var diff = parseFloat(path.attr("data-diff"));
                    diff = diff ? diff : 0;
                    // remaining height to have fullscreen image only on parallax
                    var remainingH = 0;
                    if(path.hasClass("parallax") && !$('html').hasClass('touch')){
                        var maxH = contH > windowH ? contH : windowH;
                        remainingH = windowH - contH;
                    }
                    // set img values depending on cont
                    imgH = contH + remainingH + diff;
                    imgW = imgH * ratio;
                    // fix when too large
                    if(contW > imgW){
                        imgW = contW;
                        imgH = imgW / ratio;
                    }
                    //
                    path.data("resized-imgW", imgW);
                    path.data("resized-imgH", imgH);
                    path.css("background-size", imgW + "px " + imgH + "px");
                });
            }
            $(window).resize(backgroundResize);
            $(window).focus(backgroundResize);
            backgroundResize();

            /* set parallax background-position */
            function parallaxPosition(e) {
                var heightWindow = $(window).height();
                var topWindow = $(window).scrollTop();
                var bottomWindow = topWindow + heightWindow;
                var currentWindow = (topWindow + bottomWindow) / 2;

                $(".parallax").each(function(i) {
                    var path = $(this);
                    var height = path.height();
                    var top = path.offset().top;
                    var bottom = top + height;
                    // only when in range
                    if (bottomWindow > top && topWindow < bottom) {
                        var imgW = path.data("resized-imgW");
                        var imgH = path.data("resized-imgH");
                        // min when image touch top of window
                        var min = 0;
                        var max = - imgH + heightWindow;
                        var overflowH = height < heightWindow ? imgH - height : imgH - heightWindow;
                        top = top - overflowH;
                        bottom = bottom + overflowH;
                        var value = min + (max - min) * (currentWindow - top) / (bottom - top);
                        var orizontalPosition = path.attr("data-oriz-pos");
                        orizontalPosition = orizontalPosition ? orizontalPosition : '100%';
                        $(this).css('background-position', orizontalPosition + ' ' + value + 'px');
                    }
                });
            }

            if (!$('html').hasClass('touch')) {
                $(window).resize(parallaxPosition);
                $(window).scroll(parallaxPosition);
                parallaxPosition();
            }

        })();
        </script>

        <script>
/*            Waves.attach('.button', ['waves-button']);
            Waves.init({duration: 80, delay: 0});*/
        </script>
        <script src="js/velocity.min.js"></script>
    </body>

</html>
